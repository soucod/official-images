# CNB æ‰‹åŠ¨è§¦å‘æŒ‰é’®é…ç½®
# æ–‡æ¡£: https://docs.cnb.cool/zh/build/web-trigger.html

# æ‰€æœ‰åˆ†æ”¯å¯è§çš„æŒ‰é’®ï¼ˆä¸æŒ‡å®š reg è¡¨ç¤ºåŒ¹é…æ‰€æœ‰åˆ†æ”¯ï¼‰
branch:
  - buttons:
      # ========================================
      # æŒ‰é’® 1: åŒæ­¥å•ä¸ªé•œåƒ
      # ========================================
      - name: ğŸ”„ åŒæ­¥å•ä¸ªé•œåƒ
        description: åŒæ­¥æŒ‡å®šçš„ Docker é•œåƒåˆ° CNB ä»“åº“
        event: sync_single_image
        inputs:
          IMAGE_NAME:
            name: é•œåƒåç§°
            type: input
            description: é•œåƒåç§° (ä¸å«å¹³å°å‰ç¼€å’Œæ ‡ç­¾)
            placeholder: "nginx æˆ– library/mysql"
            required: true
          IMAGE_TAG:
            name: é•œåƒæ ‡ç­¾
            type: input
            description: é•œåƒæ ‡ç­¾
            placeholder: "latest"
            default: "latest"
            required: false
          IMAGE_ARCH:
            name: é•œåƒæ¶æ„
            type: select
            description: é•œåƒæ¶æ„
            default: "amd64"
            options:
              - name: x86_64 (amd64)
                value: amd64
              - name: ARM64 (arm64)
                value: arm64
          IMAGE_PLATFORM:
            name: æºé•œåƒå¹³å°
            type: select
            description: æºé•œåƒå¹³å°
            default: "docker.io"
            options:
              - name: Docker Hub (docker.io)
                value: docker.io
              - name: GitHub Container Registry (ghcr.io)
                value: ghcr.io
              - name: Quay.io
                value: quay.io

      # ========================================
      # æŒ‰é’® 2: åŒæ­¥æ‰€æœ‰é•œåƒ
      # ========================================
      - name: ğŸ“¦ åŒæ­¥æ‰€æœ‰é•œåƒ
        description: åŒæ­¥ docker-images.txt ä¸­çš„æ‰€æœ‰é•œåƒåˆ° CNB ä»“åº“
        event: sync_all_images
        inputs:
          SYNC_ARCH:
            name: é•œåƒæ¶æ„
            type: select
            description: é•œåƒæ¶æ„
            default: "amd64"
            options:
              - name: x86_64 (amd64)
                value: amd64
              - name: ARM64 (arm64)
                value: arm64

      # ========================================
      # æŒ‰é’® 3: åŒæ­¥æŒ‡å®šæ–‡ä»¶
      # ========================================
      - name: ğŸ“„ åŒæ­¥æŒ‡å®šæ–‡ä»¶
        description: åŒæ­¥æŒ‡å®šæ–‡ä»¶ä¸­åˆ—å‡ºçš„é•œåƒ
        event: sync_from_custom_file
        inputs:
          CUSTOM_FILE:
            name: é•œåƒåˆ—è¡¨æ–‡ä»¶
            type: input
            description: é•œåƒåˆ—è¡¨æ–‡ä»¶è·¯å¾„ (ç›¸å¯¹äºä»“åº“æ ¹ç›®å½•)
            placeholder: "docker-images.txt"
            default: "docker-images.txt"
            required: true
          SYNC_ARCH:
            name: é•œåƒæ¶æ„
            type: select
            description: é•œåƒæ¶æ„
            default: "amd64"
            options:
              - name: x86_64 (amd64)
                value: amd64
              - name: ARM64 (arm64)
                value: arm64

      # ========================================
      # æŒ‰é’® 4: åŒæ­¥ library å•ä¸ªé•œåƒ
      # ========================================
      - name: ğŸ“š åŒæ­¥ library é•œåƒ
        description: åŒæ­¥ library ç›®å½•ä¸­å®šä¹‰çš„ Docker Official Image
        event: sync_library_image
        inputs:
          LIB_IMAGE_NAME:
            name: é•œåƒåç§°
            type: input
            description: é•œåƒåç§° (å¦‚ openjdk, alpine, nginx)
            placeholder: "openjdk"
            required: true
          VERSION_COUNT:
            name: ç‰ˆæœ¬æ•°é‡
            type: select
            description: åŒæ­¥æœ€è¿‘å‡ ä¸ªä¸»ç‰ˆæœ¬
            default: "5"
            options:
              - name: æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬
                value: "3"
              - name: æœ€è¿‘ 5 ä¸ªç‰ˆæœ¬
                value: "5"
              - name: æœ€è¿‘ 10 ä¸ªç‰ˆæœ¬
                value: "10"
          SYNC_ARCH:
            name: é•œåƒæ¶æ„
            type: select
            description: é•œåƒæ¶æ„
            default: "amd64"
            options:
              - name: x86_64 (amd64)
                value: amd64
              - name: ARM64 (arm64)
                value: arm64

      # ========================================
      # æŒ‰é’® 5: åŒæ­¥å…¨éƒ¨ library é•œåƒ
      # ========================================
      - name: ğŸ—‚ï¸ åŒæ­¥å…¨éƒ¨ library
        description: åŒæ­¥ library ç›®å½•ä¸­æ‰€æœ‰ Docker Official Images
        event: sync_library_all
        inputs:
          VERSION_COUNT:
            name: ç‰ˆæœ¬æ•°é‡
            type: select
            description: æ¯ä¸ªé•œåƒåŒæ­¥æœ€è¿‘å‡ ä¸ªä¸»ç‰ˆæœ¬
            default: "5"
            options:
              - name: æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬
                value: "3"
              - name: æœ€è¿‘ 5 ä¸ªç‰ˆæœ¬
                value: "5"
              - name: æœ€è¿‘ 10 ä¸ªç‰ˆæœ¬
                value: "10"
          SYNC_ARCH:
            name: é•œåƒæ¶æ„
            type: select
            description: é•œåƒæ¶æ„
            default: "amd64"
            options:
              - name: x86_64 (amd64)
                value: amd64
              - name: ARM64 (arm64)
                value: arm64
